# ä¿®å¤ï¼šå¯¹è¯æ¡†æ˜¾ç¤ºé¡ºåºå’Œæ‰§è¡Œæ—¶æœºé—®é¢˜

## é—®é¢˜æè¿°

ç”¨æˆ·æŠ¥å‘Šåœ¨ç‚¹å‡»"é‡ç½®è®¾å¤‡èº«ä»½"æˆ–"å®Œå…¨æ¸…ç†"æŒ‰é’®æ—¶å‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š

1. **å¤šä¸ªå¯¹è¯æ¡†åŒæ—¶å¼¹å‡º**
   - ç¡®è®¤å¯¹è¯æ¡†å’ŒæˆåŠŸæç¤ºåŒæ—¶æ˜¾ç¤º
   - ç”¨æˆ·ä½“éªŒæ··ä¹±ï¼Œæ— æ³•æ­£ç¡®æ“ä½œ

2. **æ“ä½œåœ¨ç¡®è®¤å‰å°±æ‰§è¡Œ**
   - è¿˜æœªç‚¹å‡»ç¡®è®¤ï¼Œé‡ç½®/æ¸…ç†æ“ä½œå°±å·²ç»å®Œæˆ
   - è¿åäº†ç¡®è®¤-æ‰§è¡Œçš„åŸºæœ¬æµç¨‹

3. **æ··åˆä½¿ç”¨ä¸åŒçš„å¯¹è¯æ¡†ç³»ç»Ÿ**
   - åŸç”Ÿæµè§ˆå™¨ `confirm()` / `alert()`
   - Tauri å¯¹è¯æ¡†ç³»ç»Ÿ
   - å¯¼è‡´å¼‚æ­¥æ‰§è¡Œé—®é¢˜

## æ ¹æœ¬åŸå› 

ä»£ç ä¸­æ··åˆä½¿ç”¨äº†æµè§ˆå™¨åŸç”Ÿçš„åŒæ­¥å¯¹è¯æ¡†ï¼ˆ`confirm()`, `alert()`, `prompt()`ï¼‰å’Œ Tauri çš„å¼‚æ­¥å¯¹è¯æ¡†ç³»ç»Ÿï¼Œå¯¼è‡´æ‰§è¡Œé¡ºåºæ··ä¹±ã€‚è™½ç„¶åŸç”Ÿå¯¹è¯æ¡†åº”è¯¥æ˜¯åŒæ­¥é˜»å¡çš„ï¼Œä½†åœ¨ Tauri ç¯å¢ƒä¸­å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚

## è§£å†³æ–¹æ¡ˆ

### 1. ç»Ÿä¸€ä½¿ç”¨ Tauri å¯¹è¯æ¡† API

**ä¿®æ”¹æ–‡ä»¶**: `src/App.vue`

#### å¯¼å…¥è¯­å¥ä¿®æ”¹
```typescript
// ä¹‹å‰
import { open, confirm as tauriConfirm } from '@tauri-apps/plugin-dialog'

// ä¹‹å
import { open, confirm as tauriConfirm, message as tauriMessage } from '@tauri-apps/plugin-dialog'
```

### 2. ä¿®æ”¹ `handleResetDevice` å‡½æ•°

**æ”¹åŠ¨è¦ç‚¹**:
- ä½¿ç”¨ `await tauriConfirm()` æ›¿ä»£ `confirm()`
- ä½¿ç”¨ `await tauriMessage()` æ›¿ä»£ `alert()`
- ç¡®ä¿æ‰€æœ‰å¯¹è¯æ¡†è°ƒç”¨éƒ½æ˜¯å¼‚æ­¥çš„å¹¶ç­‰å¾…å“åº”

```typescript
async function handleResetDevice() {
  // ä½¿ç”¨ Tauri çš„ç¡®è®¤å¯¹è¯æ¡†
  const confirmed = await tauriConfirm('æ­¤æ“ä½œå°†...', {
    title: 'ğŸ”„ é‡ç½®è®¾å¤‡èº«ä»½æ ‡è¯†',
    okLabel: 'ç¡®å®š',
    cancelLabel: 'å–æ¶ˆ',
    kind: 'warning'
  })

  if (!confirmed) {
    return  // ç”¨æˆ·å–æ¶ˆï¼Œç›´æ¥è¿”å›
  }

  // æ‰§è¡Œæ“ä½œ...
  
  // ä½¿ç”¨ Tauri çš„æ¶ˆæ¯å¯¹è¯æ¡†æ˜¾ç¤ºç»“æœ
  await tauriMessage(msg, {
    title: 'âœ… è®¾å¤‡èº«ä»½å·²é‡ç½®!',
    okLabel: 'ç¡®å®š',
    kind: 'info'
  })
}
```

### 3. ä¿®æ”¹ `handleResetAll` å‡½æ•°

**æ”¹åŠ¨è¦ç‚¹**:
- ç§»é™¤ `prompt()` è¾“å…¥éªŒè¯
- ä½¿ç”¨ä¸¤æ¬¡ `tauriConfirm()` è¿›è¡ŒäºŒæ¬¡ç¡®è®¤
- ä½¿ç”¨ `await tauriMessage()` æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯

```typescript
async function handleResetAll() {
  // ç¬¬ä¸€æ¬¡ç¡®è®¤
  const firstConfirm = await tauriConfirm(confirmMsg, {
    title: 'âš ï¸ è­¦å‘Š: å®Œå…¨æ¸…ç†æ¨¡å¼',
    okLabel: 'ç»§ç»­',
    cancelLabel: 'å–æ¶ˆ',
    kind: 'warning'
  })

  if (!firstConfirm) {
    return
  }

  // ç¬¬äºŒæ¬¡ç¡®è®¤
  const secondConfirm = await tauriConfirm('è¯·å†æ¬¡ç¡®è®¤...', {
    title: 'âš ï¸ æœ€ç»ˆç¡®è®¤',
    okLabel: 'ç¡®è®¤åˆ é™¤',
    cancelLabel: 'å–æ¶ˆ',
    kind: 'warning'
  })

  if (!secondConfirm) {
    showMessage('info', 'âŒ æ“ä½œå·²å–æ¶ˆ')
    return
  }

  // æ‰§è¡Œæ“ä½œ...
  
  // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
  await tauriMessage(msg, {
    title: 'âœ… å®Œå…¨æ¸…ç†å®Œæˆ!',
    okLabel: 'ç¡®å®š',
    kind: 'info'
  })
}
```

### 4. ä¿®å¤å…¶ä»–ä½¿ç”¨åŸç”Ÿå¯¹è¯æ¡†çš„åœ°æ–¹

**openStorageFolder å‡½æ•°**:
```typescript
// ä¹‹å‰
alert(`æ‰“å¼€å­˜å‚¨æ–‡ä»¶å¤¹å¤±è´¥: ${error}`)

// ä¹‹å
await tauriMessage(`æ‰“å¼€å­˜å‚¨æ–‡ä»¶å¤¹å¤±è´¥: ${error}`, {
  title: 'âŒ é”™è¯¯',
  okLabel: 'ç¡®å®š',
  kind: 'error'
})
```

## å…³é”®æ”¹è¿›

1. **ç»Ÿä¸€çš„å¯¹è¯æ¡†ç³»ç»Ÿ**
   - æ‰€æœ‰å¯¹è¯æ¡†éƒ½ä½¿ç”¨ Tauri API
   - ä¿è¯ä¸€è‡´çš„å¤–è§‚å’Œè¡Œä¸º

2. **æ­£ç¡®çš„å¼‚æ­¥å¤„ç†**
   - æ‰€æœ‰å¯¹è¯æ¡†è°ƒç”¨éƒ½ä½¿ç”¨ `await`
   - ç¡®ä¿æŒ‰é¡ºåºæ‰§è¡Œ

3. **æ¸…æ™°çš„æ‰§è¡Œæµç¨‹**
   - ç¡®è®¤ â†’ æ‰§è¡Œ â†’ ç»“æœæ˜¾ç¤º
   - ç”¨æˆ·å–æ¶ˆæ—¶ç«‹å³è¿”å›

4. **æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ**
   - å¯¹è¯æ¡†ä¸ä¼šåŒæ—¶å‡ºç°
   - æ“ä½œåªåœ¨ç¡®è®¤åæ‰§è¡Œ
   - ç»Ÿä¸€çš„è§†è§‰æ ·å¼

## éªŒè¯æ­¥éª¤

1. **ç¼–è¯‘è¿è¡Œåº”ç”¨**
   ```bash
   cd Verdent_account_manger
   npm run tauri dev
   ```

2. **æµ‹è¯•é‡ç½®è®¾å¤‡èº«ä»½**
   - ç‚¹å‡»æŒ‰é’®ï¼Œç¡®è®¤åªæ˜¾ç¤ºä¸€ä¸ªå¯¹è¯æ¡†
   - å–æ¶ˆæ“ä½œï¼Œç¡®è®¤æ²¡æœ‰æ‰§è¡Œ
   - ç¡®è®¤æ“ä½œï¼Œç­‰å¾…å®Œæˆåæ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯

3. **æµ‹è¯•å®Œå…¨æ¸…ç†**
   - ä¾æ¬¡æ˜¾ç¤ºä¸¤ä¸ªç¡®è®¤å¯¹è¯æ¡†
   - ä»»æ„æ­¥éª¤å–æ¶ˆéƒ½ä¼šä¸­æ­¢æ“ä½œ
   - ç¡®è®¤åæ‰§è¡Œå¹¶æ˜¾ç¤ºç»“æœ

## ç›¸å…³æ–‡ä»¶

- `src/App.vue` - ä¸»è¦ä¿®æ”¹æ–‡ä»¶
- `test/test_dialog_order.py` - æµ‹è¯•éªŒè¯è„šæœ¬
- `docs/fix_dialog_order.md` - æœ¬æ–‡æ¡£

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿ `tauri-plugin-dialog` æ’ä»¶å·²æ­£ç¡®å®‰è£…å’Œé…ç½®
2. æ‰€æœ‰å¯¹è¯æ¡†è°ƒç”¨å¿…é¡»ä½¿ç”¨ `await` ç­‰å¾…å“åº”
3. é¿å…æ··åˆä½¿ç”¨åŸç”Ÿå’Œ Tauri å¯¹è¯æ¡† API
