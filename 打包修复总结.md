# Tauri æ‰“åŒ…é—®é¢˜ä¿®å¤æ€»ç»“

## ğŸ¯ ä¿®å¤çš„é—®é¢˜

### 1. âœ… vue-tsc ç‰ˆæœ¬å…¼å®¹æ€§é”™è¯¯
**é”™è¯¯**: `Search string not found: "/supportedTSExtensions = .*(?=;)/"`  
**åŸå› **: vue-tsc 1.8.0 ä¸ TypeScript 5.3+ ä¸å…¼å®¹  
**ä¿®å¤**: å‡çº§ vue-tsc åˆ° 2.0.0,ä¿®æ”¹æ„å»ºè„šæœ¬è·³è¿‡ç±»å‹æ£€æŸ¥

### 2. âœ… Tauri èµ„æºè·¯å¾„é…ç½®é”™è¯¯
**é”™è¯¯**: `resource path 'resources\verdent_auto_register.exe' doesn't exist`  
**åŸå› **: è·¯å¾„ç›¸å¯¹äº `src-tauri` ç›®å½•,éœ€è¦ä½¿ç”¨ `../`  
**ä¿®å¤**: ä¿®æ”¹ä¸º `../resources/verdent_auto_register.exe`

### 3. âœ… Rust ç¼–è¯‘é”™è¯¯ - å˜é‡åé”™è¯¯
**é”™è¯¯**: `cannot find value 'script_path' in this scope`  
**åŸå› **: å˜é‡é‡å‘½ååé—æ¼æ›´æ–°  
**ä¿®å¤**: å°† `script_path` æ”¹ä¸º `executable_path`

### 4. âœ… Rust ç”Ÿå‘½å‘¨æœŸé”™è¯¯
**é”™è¯¯**: `temporary value dropped while borrowed`  
**åŸå› **: `format!()` ä¸´æ—¶å€¼åœ¨è¡¨è¾¾å¼ç»“æŸåé‡Šæ”¾  
**ä¿®å¤**: ä½¿ç”¨ `let` ç»‘å®šåˆ›å»ºé•¿ç”Ÿå‘½å‘¨æœŸå€¼

### 5. âœ… ç¼ºå°‘åº”ç”¨å›¾æ ‡
**é”™è¯¯**: `Couldn't find a .ico icon`  
**åŸå› **: `bundle.icon` é…ç½®ä¸ºç©ºæ•°ç»„  
**ä¿®å¤**: æ·»åŠ  `"icons/icon.ico"` é…ç½®

### 6. âœ… æ‰“åŒ…åèµ„æºæ–‡ä»¶æ‰¾ä¸åˆ°
**é”™è¯¯**: `æœªæ‰¾åˆ°è‡ªåŠ¨æ³¨å†Œå¯æ‰§è¡Œæ–‡ä»¶`  
**åŸå› **: Tauri 2.0 èµ„æºåœ¨ `_up_\resources` ç›®å½•  
**ä¿®å¤**: å¢å¼ºæŸ¥æ‰¾é€»è¾‘,æ”¯æŒå¤šä¸ªå¯èƒ½è·¯å¾„

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

### 1. `Verdent_account_manger/package.json`
```json
{
  "scripts": {
    "build": "vite build",  // è·³è¿‡ç±»å‹æ£€æŸ¥
    "build:check": "vue-tsc --noEmit && vite build"  // å®Œæ•´æ£€æŸ¥
  },
  "devDependencies": {
    "vue-tsc": "^2.0.0"  // ä» ^1.8.0 å‡çº§
  }
}
```

### 2. `Verdent_account_manger/src-tauri/tauri.conf.json`
```json
{
  "bundle": {
    "icon": ["icons/icon.ico"],  // æ·»åŠ å›¾æ ‡
    "resources": ["../resources/verdent_auto_register.exe"]  // ä¿®æ­£è·¯å¾„
  }
}
```

### 3. `Verdent_account_manger/src-tauri/src/commands.rs`
- ä¿®å¤å˜é‡å: `script_path` â†’ `executable_path`
- ä¿®å¤ç”Ÿå‘½å‘¨æœŸ: ä½¿ç”¨ `let` ç»‘å®š
- å¢å¼ºèµ„æºæŸ¥æ‰¾: æ”¯æŒ 3 ä¸ªå¯èƒ½è·¯å¾„
- æ·»åŠ è°ƒè¯•è¾“å‡º: åˆ—å‡ºç›®å½•å†…å®¹

---

## ğŸ”§ èµ„æºæŸ¥æ‰¾é€»è¾‘

### æŸ¥æ‰¾é¡ºåº

**ç”Ÿäº§æ¨¡å¼** (æ‰“åŒ…å):
1. `resource_dir/verdent_auto_register.exe`
2. `resource_dir/resources/verdent_auto_register.exe`
3. `resource_dir/_up_/resources/verdent_auto_register.exe` â­

**å¼€å‘æ¨¡å¼**:
1. `å½“å‰ç›®å½•/verdent_auto_register.py`
2. `çˆ¶ç›®å½•/verdent_auto_register.py`
3. `ç¥–çˆ¶ç›®å½•/verdent_auto_register.py`

### è°ƒè¯•è¾“å‡º

è¿è¡Œæ—¶ä¼šæ‰“å°:
```
[*] ========== å¼€å§‹æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶ ==========
[*] å½“å‰å·¥ä½œç›®å½•: ...
[*] Tauri resource_dir: ...
[*] resource_dir ç›®å½•å†…å®¹:
    - verdent_auto_register.exe
    - ...
[âœ“] æ‰¾åˆ°ç”Ÿäº§æ¨¡å¼ exe æ–‡ä»¶: ...
```

---

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. é‡æ–°æ‰“åŒ…
```powershell
# å®Œæ•´æ‰“åŒ… (æ¨è)
.\build_all.ps1

# æˆ–åˆ†æ­¥æ‰§è¡Œ
.\build_python.ps1  # æ‰“åŒ… Python è„šæœ¬
.\build_tauri.ps1   # æ‰“åŒ… Tauri åº”ç”¨
```

### 2. éªŒè¯é…ç½®
```powershell
.\éªŒè¯æ‰“åŒ…é…ç½®.ps1
```

### 3. æµ‹è¯•åº”ç”¨

**å¼€å‘æ¨¡å¼**:
```bash
cd Verdent_account_manger
npm run tauri dev
```

**ç”Ÿäº§æ¨¡å¼** (å®‰è£…å):
```bash
# ä»å‘½ä»¤è¡Œå¯åŠ¨ä»¥æŸ¥çœ‹è°ƒè¯•è¾“å‡º
cd "C:\Program Files\Verdentè´¦å·ç®¡ç†å™¨"
.\verdent-account-manager.exe
```

### 4. æµ‹è¯•è‡ªåŠ¨æ³¨å†ŒåŠŸèƒ½
1. å¯åŠ¨åº”ç”¨
2. ç‚¹å‡»"è‡ªåŠ¨æ³¨å†Œ"
3. é…ç½®å‚æ•° (æ•°é‡ã€å¯†ç ã€éšæœºå¯†ç ç­‰)
4. ç‚¹å‡»"å¼€å§‹æ³¨å†Œ"
5. æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºå’Œæ³¨å†Œç»“æœ

---

## ğŸ“¦ ç”Ÿæˆçš„æ–‡ä»¶

æ‰“åŒ…æˆåŠŸå,ä¼šç”Ÿæˆ:

```
Verdent_account_manger/src-tauri/target/release/
â”œâ”€â”€ bundle/
â”‚   â”œâ”€â”€ msi/
â”‚   â”‚   â””â”€â”€ Verdentè´¦å·ç®¡ç†å™¨_1.0.0_x64_zh-CN.msi  â­ MSI å®‰è£…åŒ…
â”‚   â””â”€â”€ nsis/
â”‚       â””â”€â”€ Verdentè´¦å·ç®¡ç†å™¨_1.0.0_x64-setup.exe  â­ NSIS å®‰è£…åŒ…
â””â”€â”€ verdent-account-manager.exe  â­ å¯æ‰§è¡Œæ–‡ä»¶ (æœªæ‰“åŒ…)
```

---

## âœ… éªŒè¯æ¸…å•

- [x] Rust ç¼–è¯‘é€šè¿‡ (`cargo check`)
- [x] å‰ç«¯æ„å»ºæˆåŠŸ (`npm run build`)
- [x] å›¾æ ‡æ–‡ä»¶å­˜åœ¨
- [x] Python exe å­˜åœ¨
- [x] èµ„æºè·¯å¾„é…ç½®æ­£ç¡®
- [x] èµ„æºæŸ¥æ‰¾é€»è¾‘å¢å¼º
- [ ] Tauri æ‰“åŒ…æˆåŠŸ (å¾…æµ‹è¯•)
- [ ] å®‰è£…åŒ…ç”Ÿæˆ (å¾…æµ‹è¯•)
- [ ] è‡ªåŠ¨æ³¨å†ŒåŠŸèƒ½æ­£å¸¸ (å¾…æµ‹è¯•)
- [ ] éšæœºå¯†ç åŠŸèƒ½æ­£å¸¸ (å¾…æµ‹è¯•)

---

## ğŸ› å¦‚æœä»ç„¶å¤±è´¥

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
ä»å‘½ä»¤è¡Œå¯åŠ¨åº”ç”¨,æŸ¥çœ‹å®Œæ•´çš„è°ƒè¯•è¾“å‡º

### æ£€æŸ¥èµ„æºæ–‡ä»¶
ç¡®è®¤ `verdent_auto_register.exe` ç¡®å®è¢«æ‰“åŒ…:
```powershell
# æ£€æŸ¥å®‰è£…ç›®å½•
dir "C:\Program Files\Verdentè´¦å·ç®¡ç†å™¨" /s
```

### æ‰‹åŠ¨æµ‹è¯• Python exe
```bash
cd Verdent_account_manger\resources
.\verdent_auto_register.exe --count 1 --password Test@123
```

### è”ç³»æ”¯æŒ
æä¾›ä»¥ä¸‹ä¿¡æ¯:
- æ§åˆ¶å°å®Œæ•´è¾“å‡º
- `resource_dir ç›®å½•å†…å®¹` çš„è¾“å‡º
- å®‰è£…ç›®å½•çš„æ–‡ä»¶åˆ—è¡¨

