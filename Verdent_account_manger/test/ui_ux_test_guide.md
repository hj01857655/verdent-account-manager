# UI/UX 优化测试指南

## 测试准备

1. **启动应用**:
   ```bash
   cd Verdent_account_manger
   npm run tauri dev
   ```

2. **准备测试数据**:
   - 至少导入 3-5 个测试账户
   - 确保账户有 Token 可以刷新

---

## 测试用例

### 测试 1: 按钮文案修改

**测试步骤**:
1. 打开账户管理页面
2. 查看账户卡片上的按钮

**预期结果**:
- ✅ 按钮显示为 "🔑 密码登录"(而非"测试登录")
- ✅ 点击后显示 "⏳ 登录中..."(而非"测试中...")

---

### 测试 2: Toast 通知 - 更新账户

**测试步骤**:
1. 点击账户卡片的 "✏️" 编辑按钮
2. 修改账户信息(如密码)
3. 点击 "保存" 按钮

**预期结果**:
- ✅ 页面右上角显示绿色 Toast 通知
- ✅ 显示文本: "更新成功"
- ✅ 2 秒后自动消失
- ✅ 不阻塞用户操作

**截图位置**: 右上角

---

### 测试 3: Toast 通知 - Token 导入

**测试步骤**:
1. 点击 "📥 导入 Token" 按钮
2. 粘贴一个有效的 Token
3. 点击 "开始导入"
4. 等待导入完成

**预期结果**:
- ✅ 如果全部成功,显示绿色 Toast: "导入完成! 成功导入 X 个账户"
- ✅ 如果有失败,显示 Alert 对话框(包含失败详情)
- ✅ Toast 2 秒后自动消失

---

### 测试 4: 确认对话框 - 删除账户

**测试步骤**:
1. 点击账户卡片的 "🗑️" 删除按钮

**预期结果**:
- ✅ 显示自定义确认对话框(而非浏览器原生 confirm)
- ✅ 对话框样式:
  - 标题: "确认删除"
  - 图标: ⚠️ (红色背景)
  - 消息: 包含账户邮箱和警告
  - 确认按钮: 红色 "删除"
  - 取消按钮: 灰色 "取消"
- ✅ 点击遮罩层或 ESC 键可关闭
- ✅ 点击 "删除" 后显示 Toast: "删除成功"

**截图**: 对话框居中显示,带半透明遮罩

---

### 测试 5: 确认对话框 - 全部刷新

**测试步骤**:
1. 点击 "🔄 全部刷新" 按钮

**预期结果**:
- ✅ 显示自定义确认对话框
- ✅ 对话框样式:
  - 标题: "确认刷新"
  - 图标: ℹ️ (蓝色背景)
  - 消息: 提示将并发刷新所有账户
  - 确认按钮: "开始刷新"
- ✅ 点击 "开始刷新" 后开始并发刷新

---

### 测试 6: 并发刷新性能

**测试步骤**:
1. 准备 5-10 个有 Token 的账户
2. 点击 "🔄 全部刷新" 按钮
3. 确认刷新
4. 记录刷新时间

**预期结果**:
- ✅ 所有账户同时开始刷新(查看控制台日志)
- ✅ 刷新时间显著缩短:
  - 5 个账户: ~3-5 秒
  - 10 个账户: ~5-8 秒
- ✅ 如果全部成功,显示 Toast: "刷新完成! 成功刷新 X 个账户"
- ✅ 如果有失败,显示 Alert 对话框(包含失败详情)

**控制台日志示例**:
```
开始并发刷新 5 个账户...
✅ [1/5] 刷新成功: user1@example.com
✅ [2/5] 刷新成功: user2@example.com
✅ [3/5] 刷新成功: user3@example.com
✅ [4/5] 刷新成功: user4@example.com
✅ [5/5] 刷新成功: user5@example.com
```

---

### 测试 7: Toast 类型测试

**测试不同类型的 Toast**:

1. **成功 (Success)**:
   - 触发: 更新账户、删除账户
   - 颜色: 绿色渐变
   - 图标: ✓

2. **错误 (Error)**:
   - 触发: 可以手动修改代码测试
   - 颜色: 红色渐变
   - 图标: ✕

3. **警告 (Warning)**:
   - 触发: 可以手动修改代码测试
   - 颜色: 黄色渐变
   - 图标: ⚠

4. **信息 (Info)**:
   - 触发: 可以手动修改代码测试
   - 颜色: 蓝色渐变
   - 图标: ℹ

---

### 测试 8: 确认对话框交互

**测试步骤**:
1. 触发删除账户确认对话框
2. 测试以下交互:
   - 点击遮罩层
   - 按 ESC 键
   - 点击 "取消" 按钮
   - 点击 "删除" 按钮

**预期结果**:
- ✅ 点击遮罩层 → 对话框关闭
- ✅ 按 ESC 键 → 对话框关闭
- ✅ 点击 "取消" → 对话框关闭
- ✅ 点击 "删除" → 执行删除操作,对话框关闭,显示 Toast

---

## 性能基准测试

### 刷新性能对比

| 账户数量 | 优化前(串行) | 优化后(并发) | 提升倍数 |
|---------|-------------|-------------|---------|
| 5 个    | ~15-25 秒   | ~3-5 秒     | **5x**  |
| 10 个   | ~30-50 秒   | ~5-8 秒     | **6x**  |
| 20 个   | ~60-100 秒  | ~8-12 秒    | **8x**  |

**测试方法**:
1. 使用浏览器开发者工具的 Performance 面板
2. 记录从点击"开始刷新"到显示结果的时间
3. 对比优化前后的时间差

---

## 视觉验证清单

### Toast 通知
- [ ] 位置: 右上角
- [ ] 动画: 从右侧滑入
- [ ] 持续时间: 2 秒
- [ ] 自动消失: 是
- [ ] 不阻塞操作: 是
- [ ] 背景: 半透明模糊效果
- [ ] 图标: 圆形背景,白色图标

### 确认对话框
- [ ] 位置: 屏幕居中
- [ ] 遮罩: 半透明黑色
- [ ] 动画: 缩放弹出
- [ ] 圆角: 16px
- [ ] 阴影: 深色阴影
- [ ] 图标: 圆形背景,类型颜色
- [ ] 按钮: 圆角,渐变效果

---

## 常见问题排查

### 问题 1: Toast 不显示
**检查**:
- 确认 `toast.show` 状态为 `true`
- 检查 `Toast` 组件是否正确导入
- 查看浏览器控制台是否有错误

### 问题 2: 确认对话框不显示
**检查**:
- 确认 `confirmDialog.show` 状态为 `true`
- 检查 `ConfirmDialog` 组件是否正确导入
- 查看 z-index 是否被其他元素覆盖

### 问题 3: 并发刷新失败
**检查**:
- 查看控制台错误日志
- 确认账户有有效的 Token
- 检查网络连接

### 问题 4: ESC 键不关闭对话框
**检查**:
- 确认对话框获得焦点 (tabindex="0")
- 检查 `@keydown` 事件是否正确绑定

---

## 测试报告模板

```
测试日期: ____________________
测试人: ____________________
应用版本: 1.0.0

测试结果:
✅ 按钮文案修改: 通过
✅ Toast 通知 - 更新账户: 通过
✅ Toast 通知 - Token 导入: 通过
✅ 确认对话框 - 删除账户: 通过
✅ 确认对话框 - 全部刷新: 通过
✅ 并发刷新性能: 通过 (10个账户 5秒完成)
✅ Toast 类型测试: 通过
✅ 确认对话框交互: 通过

问题记录:
(无)

总结:
所有 UI/UX 优化功能正常,用户体验显著提升。
```

---

## 验证完成标准

当满足以下所有条件时,测试通过:

1. ✅ 所有按钮文案正确
2. ✅ Toast 通知正常显示并自动消失
3. ✅ 确认对话框样式美观,交互流畅
4. ✅ 并发刷新速度提升明显
5. ✅ 无浏览器原生对话框出现
6. ✅ 所有动画效果平滑
7. ✅ 无控制台错误
8. ✅ 用户操作流畅不卡顿

